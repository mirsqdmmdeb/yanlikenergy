<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Yanlik • Sohbet</title>
<link rel="stylesheet" href="yanlik.css">
</head>
<body>
<canvas id="bg"></canvas>

<main id="chatMain">
  <div id="messages"></div>
  <div id="typing">Yanlik yazıyor...</div>
</main>

<footer>
  <div class="chatbar">
    <input id="msg" class="input" placeholder="Mesaj yaz..." autocomplete="off">
    <button id="send" class="btn neon">Gönder</button>
  </div>
  <div class="links">
    <a href="index.html">🏠 Ana Sayfa</a>
    <a href="ayarlar.html">⚙️ Ayarlar</a>
  </div>
</footer>

<script src="bg.js"></script>
<script src="auth.js"></script>
<script src="memory.js"></script>
<script src="ai.js"></script>

<script>
if(!YANLIK_AUTH.requireAuth("login.html")) return;
const area=document.getElementById("messages"),typing=document.getElementById("typing"),
input=document.getElementById("msg"),send=document.getElementById("send");

function push(role,text){
 const d=document.createElement("div");
 d.className="msg "+(role==="me"?"me":"bot");
 d.innerHTML=`<div class='meta'>${new Date().toLocaleTimeString()} • ${role==="me"?"Ben":"Yanlik"}</div>${text}`;
 area.appendChild(d); area.scrollTop=area.scrollHeight;
}

async function handleSend(){
 const t=input.value.trim(); if(!t) return;
 push("me",t); input.value=""; typing.style.display="block";
 const replies=YANLIK_AI.respond(t);
 await new Promise(r=>setTimeout(r,500));
 typing.style.display="none";
 replies.forEach(r=>push("bot",r.text));
}
send.onclick=handleSend;
input.addEventListener("keydown",e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();handleSend();}});
push("bot","Selam! Ben <b>Yanlik</b>. Hadi konuşalım 🔥");
</script>
</body>
</html>